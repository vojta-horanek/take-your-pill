\documentclass[a4paper,12pt]{report}  
\usepackage[top=2.5cm, bottom=2.5cm, left=2.5cm, right=2.5cm]{geometry}
\usepackage[czech]{babel}
\usepackage[backend=bibtex]{biblatex}
\addbibresource{bibliography.bib}
\usepackage{setspace}
\usepackage{lmodern}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[htt]{hyphenat}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{color}
\usepackage{url}
\usepackage{textcomp}
\usepackage{tocloft}
\usepackage{parskip}
\usepackage[bottom, perpage]{footmisc}
\usepackage[autostyle]{csquotes}
\usepackage{subcaption}
\usepackage[hidelinks]{hyperref}
\usepackage[dvipsnames]{xcolor}
\usepackage{listings}
\usepackage{inconsolata}

\lstset{basicstyle=\footnotesize\ttfamily,breaklines=true}

\emergencystretch=1em
\chardef\_=`_

\lstdefinelanguage{Kotlin}{
  comment=[l]{//},
  commentstyle={\color{gray}\ttfamily},
  emph={filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println, groupBy, count},
  emphstyle={\color{OrangeRed}},
  identifierstyle=\color{black},
  keywords={!in, !is, abstract, actual, annotation, as, as?, break, by, catch, class, companion, const, constructor, continue, crossinline, data, delegate, do, dynamic, else, enum, expect, external, false, field, file, final, finally, for, fun, get, if, import, in, infix, init, inline, inner, interface, internal, is, lateinit, noinline, null, object, open, operator, out, override, package, param, private, property, protected, public, receiveris, reified, return, return@, sealed, set, setparam, super, suspend, tailrec, this, throw, true, try, typealias, typeof, val, var, vararg, when, where, while},
  keywordstyle={\color{NavyBlue}\bfseries},
  morecomment=[s]{/*}{*/},
  morestring=[b]",
  morestring=[s]{"""*}{*"""},
  ndkeywords={@Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, ArrayList, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String},
  ndkeywordstyle={\color{BurntOrange}\bfseries},
  sensitive=true,
  stringstyle={\color{ForestGreen}\ttfamily},
}

\usepackage{fontspec}
\setmainfont{Linux Libertine O}

\usepackage[ddmmyyyy]{datetime}
\renewcommand{\dateseparator}{.}

\usepackage{subfiles}

\setmainfont{Latin Modern Roman}
\setsansfont{Latin Modern Sans}
\setmonofont{Latin Modern Mono}

\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

\renewcommand{\thetable}{\arabic{table}}
\renewcommand{\thefigure}{\arabic{figure}}


\setlength{\parskip}{12pt}

\title{Take Your Pill}
\author{Vojtěch Hořánek}
\graphicspath{{images/}}

\renewcommand{\baselinestretch}{1.5}
\pagenumbering{gobble}

% boxík na vysvětlení termínů
\newcommand{\boxik}[1]{
  \fbox{\begin{minipage}{\textwidth}#1
\end{minipage}}}

\begin{document}

% Úžlabina titulní strana
\subfile{sections/title-page}

% Čestné prohlášení
\subfile{sections/signature}

% anotace
\subfile{sections/anotation}

\renewcommand\cftsecafterpnum{\vskip10pt}
\renewcommand\cftsubsecafterpnum{\vskip10pt}
\renewcommand\cftsubsubsecafterpnum{\vskip10pt}
\newpage
\tableofcontents % obsah

\chapter*{Úvod}
\addcontentsline{toc}{chapter}{Úvod}  
\subfile{sections/introduction}

\pagenumbering{arabic} % start page numbering on Úvod

\chapter{Návrh aplikace}
\subfile{sections/design}

\chapter{Implementace aplikace}
\subfile{sections/implementation}

\section{Uživatelské rozhraní}
\subfile{sections/user-interface}

\subsection{Úvodní obrazovka}
\subfile{sections/intro-screen}

\subsection{Domovská obrazovka}
\subfile{sections/homescreen}

\subsubsection{Detail léku}
\subfile{sections/pill-detail}

\subsubsection{Nový lék}
\subfile{sections/new-pill}

\subsection{Historie}
\subfile{sections/history}

\subsubsection{Přehled}
\label{sec:overview}
\subfile{sections/overview}

\subsubsection{Grafy}
\subfile{sections/graphs}

\subsection{Nastavení}
\subfile{sections/settings}
\subsubsection{O aplikaci}
\subfile{sections/about}

\section{Programová implementace}
\subfile{sections/programming}

\subsection{Databáze}
\label{sec:database}
\subfile{sections/database}

\subsection{Připomínání}
\label{sec:reminder}
\subfile{sections/reminders}

\chapter*{Závěr}
\addcontentsline{toc}{chapter}{Závěr}
\subfile{sections/conclusion}

\subfile{sections/screenshots}

\printbibliography

\end{document}
